{
  "hash": "63be77e6f74787fe437e6e33b082a7db",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Consulta Interactiva de Indicadores del DOF\"\ndescription: |\n  Página interactiva para consultar tipos de cambio y tasas del DOF según fechas personalizadas e indicador seleccionado.\ndate: 2024-10-05\ncategories: [R, Tutorial, Visualización, webR, DOF]\ndraft: false\nengine: knitr\nwebr: \n  show-startup-message: true\n  packages: ['httr', 'rvest', 'stringr', 'dplyr', 'lubridate', 'curl']\n  autoload-packages: true\nfilters:\n  - webr\n---\n\n\n```{webr-r}\n#| context: setup\nget_dof_rates <- function(cod_tipo_indicador, dfecha, hfecha) {\n  # cod_tipo_indicador: código del tipo de indicador\n  # dfecha: fecha desde en formato \"dd/mm/yyyy\"\n  # hfecha: fecha hasta en formato \"dd/mm/yyyy\"\n  \n  # URL base y parámetros de consulta\n  base_url <- \"https://www.dof.gob.mx/indicadores_detalle.php\"\n  query_params <- list(\n    cod_tipo_indicador = cod_tipo_indicador,\n    dfecha = dfecha,\n    hfecha = hfecha\n  )\n  \n  # Solicitud GET al sitio web del DOF con los parámetros especificados\n  res <- GET(url = base_url, query = query_params)\n  \n  # Verificación de solicitud (código de estado HTTP 200)\n  if (res$status_code != 200) {\n    stop(\"No se pudo obtener los datos del sitio del DOF\")\n  }\n  \n  # Obtener el contenido de la respuesta en formato texto con la codificación adecuada\n  content <- content(res, as = \"text\", encoding = \"ISO-8859-1\")\n  # Parsear el contenido HTML\n  page <- read_html(content)\n  \n  # Extraer la tabla de datos específica que contiene los indicadores\n  df <- html_table(page, fill = TRUE)[[6]]\n  \n  # Asignar los nombres de las columnas usando la primera fila de la tabla\n  colnames(df) <- df[1,]\n  \n  # Eliminar la primera fila que contiene los encabezados originales\n  df <- df[-1,]\n  \n  # Reemplazar guiones por barras en la columna de Fecha\n  df$Fecha <- str_replace_all(df$Fecha, \"-\", \"/\")\n  # Convertir la columna 'Valor' a numérico\n  df$Valor <- as.numeric(df$Valor)\n  \n  # Dataframe con los datos limpios\n  return(df)\n}\n\n# Lista de códigos de tipos de indicadores disponibles\n# Incluimos todos los códigos y sus descripciones para referencia\ntipo_indicadores <- list(\n  \"158\" = \"DÓLAR\",\n  \"159\" = \"UDIS\",\n  \"160\" = \"CCP\",\n  \"161\" = \"CCP-UDIS\",\n  \"162\" = \"CPP\",\n  \"163\" = \"CCP-DÓLARES\",\n  \"165\" = \"TIIE 28 DÍAS\",\n  \"166\" = \"TIIE 91 DÍAS\",\n  \"167\" = \"TIIC DEPÓSITOS 60 DÍAS\",\n  \"168\" = \"TIIC DEPÓSITOS 90 DÍAS\",\n  \"169\" = \"TIIC DEPÓSITOS 180 DÍAS\",\n  \"170\" = \"TIIC PAGARÉS 28 DÍAS\",\n  \"171\" = \"TIIC PAGARÉS 91 DÍAS\",\n  \"172\" = \"TIIC PAGARÉS 182 DÍAS\",\n  \"174\" = \"TIIE 182 DÍAS\",\n  \"175\" = \"TIIE DE FONDEO\",\n  \"176\" = \"TIIE 90 DÍAS\",\n  \"177\" = \"TIIE 29 DÍAS\",\n  \"178\" = \"TIIE 27 DÍAS\",\n  \"179\" = \"TIIE 26 DÍAS\",\n  \"180\" = \"TIIE 181 DÍAS\",\n  \"181\" = \"TIIE 92 DÍAS\",\n  \"182\" = \"TIIE 89 DÍAS\",\n  \"183\" = \"TIIE 183 DÍAS\"\n)\n```\n\n```{webr-r}\ndf_clean <- get_dof_rates(\n  cod_tipo_indicador = 158,    # Código para DÓLAR\n  dfecha = \"02/05/2016\",       # Fecha de inicio\n  hfecha = \"22/11/2020\"        # Fecha de fin\n)\n\n# Mostrar las primeras filas del data frame resultante\nhead(df_clean)\n```",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}